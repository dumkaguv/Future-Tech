import pxToRem from"../../utils/pxToRem.js";const rootSelector="[data-js-accordion]";class Accordion{selectors={accordionItemElement:"[data-js-accordion-item]",accordionContentElement:"[data-js-accordion-content]"};stateClasses={isExpanded:"is-expanded"};stateAttributes={ariaExpanded:"aria-expanded"};constructor(t){this.rootElement=t,this.accordionItemElements=t.querySelectorAll(this.selectors.accordionItemElement),this.bindEvents(),this.animate(this.accordionItemElements[0])}toggleContent(t){t.classList.contains(this.stateClasses.isExpanded)?(t.classList.remove(this.stateClasses.isExpanded),this.animate(t),this.setAttributes(t,!1)):(t.classList.add(this.stateClasses.isExpanded),this.animate(t),this.setAttributes(t,!0))}setAttributes(t,e=!1){e?t.setAttribute(this.stateAttributes.ariaExpanded,"true"):t.setAttribute(this.stateAttributes.ariaExpanded,"false")}animate(t){const e=t.querySelector(this.selectors.accordionContentElement),s=window.getComputedStyle(e),o=parseFloat(s.getPropertyValue("--padding-top-body-content"))||0;e.style.maxHeight?e.style.maxHeight=null:e.style.maxHeight=`${pxToRem(e.scrollHeight+o)}rem`}onClick=t=>{const e=t?.target?.closest(this.selectors.accordionItemElement);e&&this.toggleContent(e)};bindEvents(){this.accordionItemElements.forEach((t=>{t.addEventListener("click",this.onClick),t.addEventListener("keydown",(t=>{"Enter"===t?.key&&this.onClick(t)}))}))}}class AccordionCollection{constructor(){this.init()}init(){document.querySelectorAll(rootSelector).forEach((t=>new Accordion(t)))}}export default AccordionCollection;